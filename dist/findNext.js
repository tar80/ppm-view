var r,validArgs=function(){for(var r=[],t=PPx.Arguments;!t.atEnd();t.moveNext())r.push(t.value);return r},safeArgs=function(){for(var r=[],t=validArgs(),e=0,n=arguments.length;e<n;e++)r.push(_valueConverter(e<0||arguments.length<=e?undefined:arguments[e],t[e]));return r},_valueConverter=function(r,t){if(null==t||""===t)return null!=r?r:undefined;switch(typeof r){case"number":var e=Number(t);return isNaN(e)?r:e;case"boolean":return null!=t&&"false"!==t&&"0"!==t;default:return t}},isEmptyStr=function(r){return""===r},isEmptyObj=function(r){if(r===undefined)return!1;if(null===r)return!0;for(var t in r)return!1;return!0},withinPPv=function(){return 0===PPx.Extract("%n").indexOf("V")};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/,"")}),Array.prototype.removeEmpty||(Array.prototype.removeEmpty=function(){for(var r=[],t=0,e=this.length;t<e;t++){var n=this[t];null==n||""===n||n instanceof Array&&0===n.length||n instanceof Object&&isEmptyObj(n)||r.push(n)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t){var e;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var n=Object(this),u=n.length>>>0;if(0===u)return-1;var a=null!=t?t:0;if(Math.abs(a)===Infinity&&(a=0),a>=u)return-1;for(e=Math.max(a>=0?a:u-Math.abs(a),0);e<u;){if(e in n&&n[e]===r)return e;e++}return-1}),r=PPx.Extract("%*getcust(S_ppm#global:git)"),isEmptyStr(r);var selectionAt=function(){var r=Number(PPx.Extract("%lH"))-1,t=PPx.Extract("%*selecttext()").replace(/\t/g," ");return{col:r,forward:t.slice(0,r),backward:t.slice(r)}},caretInlineMatch=function(r,t){t&&(r=-r),PPx.Execute("*cursor 4,"+r)},caretMatchWord=function(r,t){var e=PPx.Extract("%*selecttext()").toLowerCase()[t?"lastIndexOf":"indexOf"](r.toLowerCase());if(-1!==e){var n=Number(PPx.Extract("%lH"));PPx.Execute("*cursor 4,"+(e-n+1))}};!withinPPv()&&PPx.Quit(-1);var main=function(){var r=safeArgs(!1)[0];if("0"!==PPx.Extract("%*getcust(XV_tmod)")){var t=PPx.Extract("%hs0").toLowerCase(),e=selectionAt(),n=e.forward,u=e.backward,a=getMatchIdx(t,r,n,u);a>0?caretInlineMatch(a,r):sendSearchKey(r)&&(PPx.Execute('%K"@HOME"'),caretMatchWord(t,r))}else sendSearchKey(r)},sendSearchKey=function(r){var t=r?"[":"]",e=PPx.Extract("%l");return PPx.Execute('%K"@'+t+'"'),e!==PPx.Extract("%l")},getMatchIdx=function(r,t,e,n){if(!t)return n.slice(1).toLowerCase().indexOf(r)+1;var u=e.toLowerCase().lastIndexOf(r);return-1!==u?e.length-u:-1};main();
