var r,validArgs=function(){for(var r=[],t=PPx.Arguments;!t.atEnd();t.moveNext())r.push(t.value);return r},safeArgs=function(){for(var r=[],t=validArgs(),e=0,n=arguments.length;e<n;e++)r.push(_valueConverter(e<0||arguments.length<=e?undefined:arguments[e],t[e]));return r},_valueConverter=function(r,t){if(null==t||""===t)return null!=r?r:undefined;switch(typeof r){case"number":var e=Number(t);return isNaN(e)?r:e;case"boolean":return null!=t&&"false"!==t&&"0"!==t;default:return t}},isEmptyStr=function(r){return""===r},isEmptyObj=function(r){if(r===undefined)return!1;if(null===r)return!0;for(var t in r)return!1;return!0},withinPPv=function(){return 0===PPx.Extract("%n").indexOf("V")};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/,"")}),Array.prototype.removeEmpty||(Array.prototype.removeEmpty=function(){for(var r=[],t=0,e=this.length;t<e;t++){var n=this[t];null==n||""===n||n instanceof Array&&0===n.length||n instanceof Object&&isEmptyObj(n)||r.push(n)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t){var e;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0===a)return-1;var u=null!=t?t:0;if(Math.abs(u)===Infinity&&(u=0),u>=a)return-1;for(e=Math.max(u>=0?u:a-Math.abs(u),0);e<a;){if(e in n&&n[e]===r)return e;e++}return-1}),r=PPx.Extract("%*getcust(S_ppm#global:git)"),isEmptyStr(r);var selectionAt=function(){var r=Number(PPx.Extract("%lH"))-1,t=PPx.Extract("%*selecttext()").replace(/\t/g," ");return{col:r,forward:t.slice(0,r),backward:t.slice(r)}},t={prefix:/^(.*[\/\\\t\s\.,"'`\()<>\[\]\{}])(.*)$/,suffix:/^([^\/\\\t\s\.,"'`\()<>\[\]\{}]+).*$/,all:/^[\/\\\t\s"'`<(\[\{)]*([^\s"'`>)\]}]+).*$/},extractWord=function(){var r=selectionAt(),e=r.forward,n=r.backward;return/^\s*$/.test(e)?n.replace(t.all,"$1"):""+e.replace(t.prefix,"$2")+n.replace(t.suffix,"$1")},caretMatchWord=function(r,t){var e=PPx.Extract("%*selecttext()").toLowerCase()[t?"lastIndexOf":"indexOf"](r.toLowerCase());if(-1!==e){var n=Number(PPx.Extract("%lH"));PPx.Execute("*cursor 4,"+(e-n+1))}};!withinPPv()&&PPx.Quit(-1);var main=function(){var r=safeArgs(!1,!1),t=r[0],e=r[1];if("0"!==PPx.Extract("%*getcust(XV_tmod)")){var n=extractWord(),a=find(n,t);e&&caretMatchWord(a,t)}else{var u=t?"B":"F";PPx.Execute('%K"@'+u+'"')}},find=function(r,t){var e='%k"@RIGHT@SPACE@BS@HOME@\\END"',n=t?" -previous":"";return PPx.Execute(e+'%:*find "'+r+'" -dialog'+n),PPx.Extract("%hs0")};main();
