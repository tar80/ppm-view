var e,validArgs=function(){for(var e=[],t=PPx.Arguments;!t.atEnd();t.moveNext())e.push(t.value);return e},safeArgs=function(){for(var e=[],t=validArgs(),r=0,n=arguments.length;r<n;r++)e.push(_valueConverter(r<0||arguments.length<=r?undefined:arguments[r],t[r]));return e},_valueConverter=function(e,t){if(null==t||""===t)return null!=e?e:undefined;switch(typeof e){case"number":var r=Number(t);return isNaN(r)?e:r;case"boolean":return null!=t&&"false"!==t&&"0"!==t;default:return t}},t={ppmName:"ppx-plugin-manager",ppmVersion:.95,language:"ja",encode:"utf16le",nlcode:"\r\n",nltype:"crlf",ppmID:"P",ppmSubID:"Q"},useLanguage=function(){var e=PPx.Extract("%*getcust(S_ppm#global:lang)");return"en"===e||"ja"===e?e:t.language},isEmptyStr=function(e){return""===e},isEmptyObj=function(e){if(e===undefined)return!1;if(null===e)return!0;for(var t in e)return!1;return!0},r={en:{archive:"Delete this file from archive?",safedel:"Delete this file with SafeDelete?",deleted:"Deleted"},ja:{archive:"書庫から削除しますか？",safedel:"SafeDeleteを実行しますか？",deleted:"削除しました"}};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/,"")}),Array.prototype.removeEmpty||(Array.prototype.removeEmpty=function(){for(var e=[],t=0,r=this.length;t<r;t++){var n=this[t];null==n||""===n||n instanceof Array&&0===n.length||n instanceof Object&&isEmptyObj(n)||e.push(n)}return e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0===a)return-1;var i=null!=t?t:0;if(Math.abs(i)===Infinity&&(i=0),i>=a)return-1;for(r=Math.max(i>=0?i:a-Math.abs(i),0);r<a;){if(r in n&&n[r]===e)return r;r++}return-1}),e=PPx.Extract("%*getcust(S_ppm#global:git)"),isEmptyStr(e),!function(){return 0===PPx.Extract("%n").indexOf("V")}()&&PPx.Quit(-1);var n="ppm-view",a=r[useLanguage()],main=function(){var e=PPx.Extract("%FDC");isEmptyStr(e)?delArchFile():safedelFile(e)},queryAndDo=function(e,t){PPx.Execute('%"'+n+'"%Q"'+e+'"%:'+t)},delArchFile=function(){var e="%u7-zip64.dll,d -hide %FD %FC";":PKZIP"===PPx.GetFileInformation(PPx.Extract("%FDN"))&&queryAndDo(a.archive,e)},safedelFile=function(e){var t="%Oa *file !safedelete,"+e+","+safeArgs("%1")[0]+","+("-qstart -min -nocount -retry:0 -error:0 -backup -undolog -compcmd *linemessage "+a.deleted);queryAndDo(a.safedel,t)};main();
