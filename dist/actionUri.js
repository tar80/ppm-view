var r,validArgs=function(){for(var r=[],t=PPx.Arguments;!t.atEnd();t.moveNext())r.push(t.value);return r},isEmptyStr=function(r){return""===r},isEmptyObj=function(r){if(r===undefined)return!1;if(null===r)return!0;for(var t in r)return!1;return!0},isZero=function(r){return null!=r&&("0"===r||0===r)};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/,"")}),Array.prototype.removeEmpty||(Array.prototype.removeEmpty=function(){for(var r=[],t=0,e=this.length;t<e;t++){var n=this[t];null==n||""===n||n instanceof Array&&0===n.length||n instanceof Object&&isEmptyObj(n)||r.push(n)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t){var e;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var a=null!=t?t:0;if(Math.abs(a)===Infinity&&(a=0),a>=i)return-1;for(e=Math.max(a>=0?a:i-Math.abs(a),0);e<i;){if(e in n&&n[e]===r)return e;e++}return-1}),r=PPx.Extract("%*getcust(S_ppm#global:git)"),isEmptyStr(r);var selectionAt=function(){var r=Number(PPx.Extract("%lH"))-1,t=PPx.Extract("%*selecttext()").replace(/\t/g," ");return{col:r,forward:t.slice(0,r),backward:t.slice(r)}};!function(){return 0===PPx.Extract("%n").indexOf("V")}&&PPx.Quit(-1);var main=function(){var r=validArgs()[0],t="select"===r,e=extractUriString(),n=e[0],i=e[1];if(-1===n)return"";var a=/^((?:[a-z]|https?):[/\\]{1,3}[a-z0-9\-\^\\@[\]\./=~`\{\}\+\*\<\>\?_]+(?:#.+)?).*/i,u=i.replace(a,"$1");return u=u.replace(/[\)\}\]】]$/,""),t?PPx.Execute("*cursor 4,-"+n+"%:*cursor 4,"+u.length+",1"):PPx.Execute(r+' "'+u+'"'),u},extractUriString=function(){var r=selectionAt(),t=r.col,e=r.forward,n=r.backward,i=/[a-z0-9]+$/i,a=""+e+n,u=e.lastIndexOf(":");if(~u&&!~e.slice(u).indexOf(" ")){var c=e.slice(0,u).replace(i,"").length;return[t-c,a.slice(c)]}if(~(u=n.indexOf(":"))){var l=n.slice(0,u).replace(i,"").length;return[t-(l=isZero(l)?e.replace(i,"").length:t+l),a.slice(l)]}return[-1,""]};PPx.result=main();
